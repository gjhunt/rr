names(plts[[1]])
names(plts[[1]]$data)
length(plts[[1]]$data)
melt(plts[[1]]$data)
View(melt(plts[[1]]$data))
batch=fctrs[c("stain")]
xlab="xlab"
ylab="ylab"
lout
t(lout)
rev(lout)
t(rev(lout))
names(ex_plts[[1]])
names(ex_plts[[1]]$labels)
names(ex_plts[[1]]$labels$x)
ex_plts[[1]]$labels$x
ex_plts[[1]]$labels
ex_arrange(ex_plts)
ggsave("test",ex_arrange(exp_plts),height=11,width=8.5)
ggsave("test/pdf",ex_arrange(exp_plts),height=11,width=8.5)
ggsave("test.pdf",ex_arrange(exp_plts),height=11,width=8.5)
ggsave("test.pdf",ex_arrange(ex_plts),height=11,width=8.5)
ggsave("test.pdf",ex_arrange(ex_plts),height=22,width=17)
plotdir
ggsave
plot_grid(plts[[1]]$cca_plts)
plot_grid(plotlist=plts[[1]]$cca_plts)
plot_grid(plotlist=plts[[1]]$cca_plts,ncol=1)
plot_grid(plotlist=plts[[1]]$cca_plts,ncol=1,labels='AUTO')
plot_grid
batch=1
ALPHABET
ALPHA
LETTERS
length(pp_exs)
naems(pp_ex)
names(pp_ex)
names(pp_exs)
names(pp_exs[[1]])
names(pp_exs[[1]][[1]])
pp_exs[[1]][[1]]
grid.draw(pp_exs[[1]][[1]])
grid.draw(ex_arrange(pp_exs[[1]]))
ex_arrange(pp_exs[[1]])
pp_exs[[1]]
pp_exs[[1]][[1]]
pp_exs[[1]][[1]][[1]]
class(pp_exs[[1]][[1]][[1]])
pp_exs[[1]][[1]][[2]]
grid.draw(pp_exs[[1]][[1]][[2]])
pp_exs[[1]][[1]]
grid.draw(pp_exs[[1]][[1]])
grid.draw(pp_exs[[1]][[1]][[1]])
class(pp_exs[[1]][[1]][[1]])
class(pp_exs[[1]][[1]][[1]][[1]])
grid.draw(pp_exs[[1]][[1]][[1]][[1]])
ex_arrange(grid.draw(pp_exs[[1]][[1]][[1]][[1]]))
 arrangeGrobs(grobs=pp_exs)
 arrangeGrob(grob=pp_exs)
 scaledY
length(scaledY)
length(scaledY)
uniques
uniques
sffx
dir('../data/')
fctrs
sffx
dir('../data/')
fctrs
fctrs[[1]][[1]]
fctrs[[1]][[2]]
dim(fctrs[[1]][[2]])
names(scaledY)
names(scaledY)[ex_ss]
names(scaledY)[ex_ss]
length(scaledY)
length(scaledY[[1]])
names(scaledY[[1]])
names(scaledY[[1]])
lapply(scaledY[[1]][4:8],dim)
dim(scaledY[[1]][4:8]$Z)
hist(scaledY[[1]][4:8]$Z)
scaledY[[1]][4:8]$Z
scaledY[[1]][4:8]$G
scaledY[[1]][4:8]$G[1:5,1:5]
scaledY[[1]][4:8]$Z[1:5,1:5]
scaledY[[1]][4:8]$O[1:5,1:5]
scaledY[[1]][4:8]$RR[1:5,1:5]
scaledY[[1]][4:8]$NT[1:5,1:5]
quit()
n
length(scaledY)
lapply(scaledY,function(x)sum(!is.finite(x$Z)))
lapply(scaledY,function(x)sum(!is.finite(x$Z)))
lapply(scaledY,function(x)dim(x$Z))
lapply(scaledY,function(x)dim(is.finite(x$Z)))
lapply(scaledY,function(x)dim(is.finite(x$G)))
lapply(scaledY,function(x)class((x$G)))
lapply(scaledY,function(x)class((x$Z)))
lapply(scaledY,function(x)class((x$O)))
lapply(scaledY,function(x)class((x$RR)))
lapply(scaledY,function(x)class((x$NT)))
lapply(scaledY,function(x)class((x$Z)))
lapply(scaledY,function(x)head((x$Z)))
lapply(scaledY,function(x)head(as.matrix(x$Z)))
lapply(scaledY,function(x)is.finite(as.matrix(x$Z)))
lapply(scaledY,function(x)mean(!is.finite(as.matrix(x$Z))))
Y[1:5,1:5]
Y[1:5,1:5]
Yw
Y_tmp
Y_tmp
head(Y_tmp)
Y_tmp
Yw
class(Yw)
View(Yw)
class(Yw)
head(Y_tmp)
head(Y_tmp)
hist(Y_tmp)
quit()
n
names(scaledY)
sffx=""
names(syd)
names(scaledY)
names(scaledY))
names(scaledY)
quit()
n
length(Y_no_center)
lengths(lapply(scaledY,"[[",TRANSFORMATIONS))
lapply(scaledY,"[[",TRANSFORMATIONS)
lapply(scaledY,"[[",TRANSFORMATIONS)
names(scaledY)
names(scaledY[[1]])
TRANSFORMATIONS
lapply(scaledY,"[",TRANSFORMATIONS)
lapply(scaledY,"[[",TRANSFORMATIONS)
lengths(lapply(scaledY,"[",TRANSFORMATIONS))
quit()
n
quit()
n
gc()
quit()
n
quit()
n
p
dev.off()
quit()
n
dev.off()
pdir
plotdir
quit()
n
quit()
n
names(scaledY)
scaledY[[1]]
scaledY[[1]]$NT
unlist(scaledY[[1]]$NT)
as.vector(scaledY[[1]]$NT)
hist(as.vector(scaledY[[1]]$NT))
head(df)
names(scaledY)[]
names(scaledY)[i]
length(plts)
names(plts)
names(plts)
length(plts)
plts[[1]]
names(plts)
uid
names(scaledY)
paste0(names(scaledY),sep="\\")
paste0(names(scaledY),collapse="\\")
paste0(gsub("_","\_",names(scaledY)),collapse="\\")
paste0(gsub("_","\\_",names(scaledY)),collapse="\\")
paste0(gsub("_","\\\_",names(scaledY)),collapse="\\")
paste0(gsub("_","\\_",names(scaledY)),collapse="\\")
paste0(,collapse="\\")
gsub("_","\\_",names(scaledY))
?gsub
gsub("[_]","\\_","ab_c")
gsub("[_]","\\_","ab_c",fixed=TRUE)
library('stringr')
str_replace_all("ab_c, fixed("_"), "\\_")
str_replace_all("ab_c", fixed("_"), "\\_")
str_replace_all("ab_c", fixed("_"), "\_")
str_replace_all("ab_c", fixed("_"), "\\_")
cat(str_replace_all("ab_c", fixed("_"), "\\_"))
str_replace_all(names(scaledY), fixed("_"), "\\_")
paste(str_replace_all(names(scaledY), fixed("_"), "\\_"),collapse="\\")
cat(paste(str_replace_all(names(scaledY), fixed("_"), "\\_"),collapse="\\"))
cat(paste(str_replace_all(names(scaledY), fixed("_"), "\\_"),collapse="\\\\"))
length(scaledY)
names(fctrs)
names(scaledY)
apply(scaledY[[1]]$NT,1,function(x)all(is.na(x)))
apply(scaledY[[1]]$NT,1,function(x)all(!is.na(x)))
apply(scaledY[[1]]$NT,1,function(x)!all(is.na(x)))
sum(apply(scaledY[[1]]$NT,1,function(x)!all(is.na(x))))
sapply(seq_along(scaledY),function(i)sum(apply(scaledY[[i]]$NT,1,function(x)!all(is.na(x)))))
table(sapply(seq_along(scaledY),function(i)sum(apply(scaledY[[i]]$NT,1,function(x)!all(is.na(x))))))
32+18
names(SVD_no_center)
names(SVD_no_center)[53]
names(SVD_no_center)=="Cells_CP_AreaShape_Compactness"
which(names(SVD_no_center)=="Cells_CP_AreaShape_Compactness")
names(SVD_no_center)
head(names(SVD_no_center))
which(names(SVD_no_center)=="Cells_CP_AreaShape_Compactness")
SVDs = SVD_no_center
var=1
rsv
names(rsv)
right_svs
dev.off()
dev.off()
right_svs
rsv
names(plts)
names(plts)[1]
nm=names(plts)[1]
nm
names(plts[[nm]])
head(names(plts[[nm]]))
head(names(plts[[nm]]),n=20)
names(plts[[nm]][7:11]
names(plts[[nm]])[7:11]
names(plts[[nm]][7:11])
plts[[nm]][c("rsv.NT","rsv.G","rsv.Z","rsv.O","rsv.RR")]
quit()
n
var=1
SVDs=DAPIASVD
SVDs = SVD_no_center
TRANSFORMATIONS
names(rsv)
length(rsv)
names(rsv)
rsv[[1]]
rsv[[2]]
rsv[[1]]
rsv[[2]]
rsv_ecmp_scatter
rsv_ecmp_scatter+theme(strip.text.x = element_text(size = 8, colour = "orange", angle = 90))
names(rsv_ecmp_scatter)
rsv_ecmp_scatter+theme(strip.text.x = element_text(size = 8, colour = "orange", angle = 90))
rsv_ecmp_scatter+theme(strip.text = element_text(size = 8, colour = "orange", angle = 90))
rsv_ecmp_scatter+theme(strip.text.y = element_text(size = 8, colour = "orange", angle = 90))
rsv_ecmp_scatter+theme(strip.text = element_text(size = 20))
rsv_ecmp_scatter+theme(strip.text = element_text(size = 1))
rsv_ecmp_scatter+theme(strip.text.x = element_text(size = 1))
rsv_ecmp_scatter+theme(strip.text = element_text(size = 1))
rsv_ecmp_scatter+theme(strip.text = element_text(size = 100))
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
dev.off()
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter
quit()
n
quit()
n
SVDs = DAPIASVD
SVDs = DAPIASVD
SVDs = DAPIASVD_no_center
var=1
length(rsv)
names(rsv)
rsv[[1]]
rsv[[1]]
rsv[[5]]
length(rsv)
rsvs[[1]]
rsv[[1]]
rsv[[2]]
length(rsv_ecmp_scatter)
names(rsv_ecmp_scatter)
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_ecmp_scatter34
kvals=1:4
var
chir="right"
fact=fctrs$ecmp
kvals
Ws
head(W)
panel
dim(Ws)
Ws
length(Ws)
names(ws)
names(Ws)
names(Ws)
Ws[[1]]
View(Ws[[1]])
length(kvals)
length(kvals)/2
1:4
L[[1]]
L[[2]]
L[[1]]
L[[2]]
plot_grid
plot_grid(L)
plot_grid(plotlist=L)
g_legend(L[[1]])
grid.arrange(c(L[[1]],L[[2]],g_legend(L[[1]])))
grid.arrange(grobs=c(L[[1]],L[[2]],g_legend(L[[1]])))
grid.arrange(grobs=c(as.grob(L[[1]]),as.grob(L[[2]]),g_legend(L[[1]])))
grid.arrange(grobs=c(ggplotGrob(L[[1]]),ggplotGrob(L[[2]]),g_legend(L[[1]])))
grid.arrange(grobs=c(ggplotGrob(L[[1]]),ggplotGrob(L[[2]])))
grid.arrange(L[[1]],L[[2]])
grid.arrange(L[[1]],L[[2]],g_legend(L[[1]]))
grid.arrange(L[[1]]+theme(guides=NULL),L[[2]],g_legend(L[[1]]))
grid.arrange(L[[1]]+guides(shape=NULL),L[[2]],g_legend(L[[1]]))
grid.arrange(L[[1]]+guides(shape=NULL,color=NULL),L[[2]],g_legend(L[[1]]))
grid.arrange(L[[1]]+theme(legend.position="none"),L[[2]],g_legend(L[[1]]))
grid.arrange(aL[[1]],aL[[2]])
grid.arrange
gout
print(gout)
plot(1:3)
print(gout)
plot(gout)
gout
length(aL)
length(aL)
plot_grid
grid.arrange(aL)
plot_grid
grid.arrange(L)
do.call(grid.arrange,aL)
do.call(grid.arrange,aL,layout_matrix=array(c(1,2,3),c(3,1)))
do.call(grid.arrange,aL,layout.matrix=array(c(1,2,3),c(3,1)))
do.call(grid.arrange,aL,layout_matrix=array(c(1,2,3),c(3,1)))
grid.arrange(grobs=aL,layout_matrix=array(c(1,2,3),c(3,1)))
grid.arrange(grobs=aL,layout_matrix=array(c(1,2,3),c(3,1)))
grid.arrange(grobs=aL,layout_matrix=array(c(1,1,2,2,3),c(5,1)))
rsv_ecmp_scatter
rsv_ecmp_scatter
rsv_row_scatter
rsv_row_scatter
rsv_col_scatter
ecmp_ch=levels(fctrs$ecmp$factor)[1]
ecmp_ch
rsv_scatter_by_ecmp
rsv[[1]]
rsv[[2]]
dapi_hl_ss
dapi_ss
names(dapi_ss)
grep("AreaShape",names(dapi_ss))
dapi_morph
sffx
names(dapi_plts)
names(dapi_plts[[1]])
dapi_plts[[1]]$rsv.NT
dapi_plts[[1]]$rsv.RR
SVD=DAPIASVD
SVD_list=DAPIASVD_no_center
subdir
subdir="sv/DAPIASVD"
names(sv_plts)
subidr
subdir
subdir="sv/DAPIASVD/"
subdir
lapply(sv_plts,class)
lapply(sv_plts[1]],class)
lapply(sv_plts[[1]],class)
sapply(sv_plts[[1]],class)
which(sapply(sv_plts[[1]],class)==c("gg","ggplot"))
sapply(sv_plts[[1]],function(x)class(x)==c("gg","ggplot"))
sapply(sv_plts[[1]],function(x)any(class(x)==c("ggplot")))
which(sapply(sv_plts[[1]],function(x)any(class(x)==c("ggplot"))))
ggplotGrob
ggplotGrob(sv_plts[[3]]
)
ggplotGrob(sv_plts[[3]])
any_gg
length(any_gg)
names(sv_plts)
names(sv_plts)
length(sv_plts)
length(sv_plts[[1]])
i=1
plt_nms
quit()
n
quit()
n
quit()
n
library('pryr')
install.packages('pryr')
library('pryr')
object_size(ls())
object_size(1:10)
96/10
object_size(scaledY)
object_size(scaledY[[1]])
names(scaledY[[1]])
sapply(scaledY[[1]],object_size)
sapply(scaledY[[1]],function(x)print(object_size(x))
)
sapply(scaledY[[1]],function(x)print(object_size(x))
)
sapply(scaledY[[1]],object_size)
ls(scaledY[[1]]$rr_fn)
ls(as.environment(scaledY[[1]]$rr_fn))
scaledY[[1]]$rr_fn
environment(scaledY[[1]]$rr_fn)
ls(environment(scaledY[[1]]$rr_fn))
environment(scaledY[[1]]$rr_fn)$G_fn
object_size(environment(scaledY[[1]]$rr_fn)$G_fn)
object_size(environment(scaledY[[1]]$rr_fn)$O_fn)
object_size(environment(scaledY[[1]]$rr_fn)$Z_fn)
object_size(environment(scaledY[[1]]$rr_fn)$G_fn)
object_size(environment(scaledY[[1]]$rr_fn)$q)
object_size(environment(scaledY[[1]]$rr_fn)$T)
object_size(environment(scaledY[[1]]$rr_fn)$T_opt)
object_size(environment(scaledY[[1]]$rr_fn)$z)
object_size(environment(scaledY[[1]]$rr_fn)$Z_fn)
object_size(environment(environment(scaledY[[1]]$rr_fn)$Z_fn))
(environment(environment(scaledY[[1]]$rr_fn)$Z_fn)
)
ls(environment(environment(scaledY[[1]]$rr_fn)$Z_fn))
object_size(scaledY)
quit()
n
library('pryr')
object_size(scaledY)
object_size(scaledY[[1]])
names(scaledY[[1]])
lapply(scaledY[[1]],object_size)
names(scaledY)
names(scaledY[[1]])
names(scaledY[[1]]$opts)
scaledY[[1]]$opts
object_size(scaledY[[1]])
object_size(rm_opts(scaledY[[1]]))
rm_opts((rm_opts(scaledY[[1]])))
object_size(rm_opts((rm_opts(scaledY[[1]]))))
quit()
n
object_size(scaledY)
library('pryr')
object_size(scaledY)
gc()
object_size()
lapply(ls(),object_size)
lapply(ls(),function(x)object_size(get(x)))
sapply(ls(),function(x)object_size(get(x)))
length(aY)
quit()
n
sapply(ls(),function(x)object_size(get(x)))
library('pryr')
sapply(ls(),function(x)object_size(get(x)))
lapply(ls(),function(x)object_size(get(x)))
mem_used()
quit()
n
warnings()
names(scaledY)
lapply(scaledY,function(x)dim(x$RR))
sapply(scaledY,function(x)dim(x$RR))
unique(sapply(scaledY,function(x)dim(x$RR)))
unique(unlist(sapply(scaledY,function(x)dim(x$RR))))
unique(as.vector(sapply(scaledY,function(x)dim(x$RR))))
ex_ss[4]
save_plate_plot(scaledY[ex_ss[4]])
save_plate_plot(scaledY[ex_ss[4]])
save_plate_plots(scaledY[ex_ss[4]])
plate=5
well=7
add_ecmp_markers=TRUE
ecmp="NID1_1"
ind
quit()
n
